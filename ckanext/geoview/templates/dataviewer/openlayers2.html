{% extends "dataviewer/base.html" %}

{% block page %}

    {% set map_config = h.get_common_map_config_geoviews() %}
    {% set ol_config = h.get_openlayers_viewer_config() %}
    <div id="data-preview"
         data-module="olpreview"
         data-module-map_config="{{ h.dump_json(map_config) }}"
         data-module-ol_config="{{ h.dump_json(ol_config) }}"
         >
        <h4 class="loading-dialog">
          <div class="loading-spinner"></div>
          <div class="left">{{ _('Loading...') }}</div>
        </h4>
    </div>

    {% resource 'ckanext-geoview/openlayers2' %}
    {% resource 'vendor/bootstrap' %}
{% endblock %}

{% block scripts %}
    {{ super() }}

    <script>
       var CKAN_GAPI_KEY = "{{ h.literal(c.gapi_key) }}"
       var proxy_service_url = {{ h.literal(proxy_service_url) or 'undefined' }}
       var proxy_url = {{ h.literal(proxy_url) or 'undefined'  }}
    </script>
{% endblock %}

{% block styles %}
    <link rel="stylesheet" href="{{ h.url_for_static('/css/bootstrap.min.css') }}" type="text/css" media="screen, projection" />
{% endblock %}

